<h1 class="title">Patrón Value List Handler</h1>

<p>El patrón <strong>Value List Handler</strong> es un patrón de la arquitectura Java EE que se usa para manejar listas grandes de resultados (paginación).</p>

<h2 class="subtitle">Propósito</h2>
<p>Optimizar la iteración y visualización de grandes listas de datos.</p>

<h2 class="subtitle">Caso de Uso Real: Paginación de Resultados de Búsqueda</h2>
<p><strong>Contexto:</strong> Un usuario busca "Zapatos" y la base de datos devuelve 50.000 resultados. Solo puedes mostrar 20 por página.</p>

<p><strong>El Problema:</strong> Recuperar 50.000 objetos de la DB cada vez que el usuario pasa de página es ineficiente y tumbará el servidor. O peor, traer todos a la capa de presentación y paginar allí consume toda la memoria.</p>

<p><strong>La Solución (Value List Handler):</strong> Usas un manejador (Handler) que gestiona la lista de resultados.
<br>El Handler puede ejecutar la query una vez y cachear solo los IDs, recuperando los objetos completos solo para la página actual (Lazy Loading a nivel de lista). O puede mantener un cursor de base de datos abierto (aunque esto es arriesgado en web) o gestionar offsets SQL de forma trasparente.</p>

<h2 class="subtitle">Análisis de la Implementación</h2>

<ul>
    <li>
        <strong>Iterador Remoto Inteligente:</strong> 
        <p>Actúa como un iterador avanzado que vive en el servidor (Session Scope). El cliente le pide "dame la siguiente página" y el Handler se encarga de la lógica compleja de obtener ese subconjunto de datos de la forma más eficiente posible.</p>
    </li>
    <li>
        <strong>Caché de Resultados:</strong> 
        <p>Evita re-ejecutar queries costosas si el usuario navega adelante y atrás en los resultados. Sin embargo, hay que tener cuidado con el consumo de memoria en la sesión HTTP.</p>
    </li>
</ul>

<h2 class="subtitle">Implementación</h2>

<div class="center-horizontal">
<pre><code class="language-java">
class ProductListHandler {
    private List<Product> list;
    private ListIterator iterator;
    
    public List<Product> getNextChunk(int chunkSize) {
        // Retorna los siguientes N elementos
        return list.subList(current, current + chunkSize);
    }
}
</code></pre>
</div>
<span class="center-horizontal caption">Ejemplo de Value List Handler</span>
