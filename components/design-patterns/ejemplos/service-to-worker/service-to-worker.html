<h1 class="title">Patrón Service to Worker</h1>

<p>El patrón <strong>Service to Worker</strong> es un patrón de la arquitectura Java EE que implica un procesamiento previo más pesado y acceso a lógica de negocio antes de mostrar la vista.</p>

<h2 class="subtitle">Propósito</h2>
<p>Realizar operaciones complejas antes de renderizar la vista.</p>

<h2 class="subtitle">Caso de Uso Real: Dashboards Complejos y CMS</h2>
<p><strong>Contexto:</strong> Estás generando la página de inicio de un portal de noticias personalizado. Necesitas autenticar al usuario, recuperar sus preferencias, buscar las noticias de sus categorías favoritas, obtener el clima de su ciudad y cargar anuncios relevantes.</p>

<p><strong>El Problema:</strong> No puedes delegar esto a la vista (sería lentísimo y sucio). Tampoco es un simple "despacho" condicional. Hay mucho trabajo de "fontanería" de datos que hacer antes de siquiera pensar en HTML.</p>

<p><strong>La Solución (Service to Worker):</strong> El Controlador (Worker) orquesta llamadas a múltiples servicios de negocio y DAOs para construir un Modelo de datos completo y rico.
<br>Solo cuando todo el trabajo pesado ha terminado y los datos están listos en el DTO/Modelo, se pasa el control a la vista para que pinte.</p>

<h2 class="subtitle">Análisis de la Implementación</h2>

<ul>
    <li>
        <strong>Separación Estricta:</strong> 
        <p>Es la evolución robusta de MVC. El Controlador hace TODO el trabajo sucio. La Vista es completamente "tonta" (Passive View), solo recibe datos listos para consumir.</p>
    </li>
    <li>
        <strong>Performance:</strong> 
        <p>Permite optimizar las llamadas a datos en el backend antes de empezar a enviar ni un solo byte de respuesta al cliente (Buffer de respuesta).</p>
    </li>
</ul>

<h2 class="subtitle">Implementación</h2>

<div class="center-horizontal">
<pre><code class="language-java">
// Controller con lógica pesada antes de la vista
class OrderController {
    public void processOrder(Order order) {
        // Llamada a servicios complejos
        inventoryService.check(order);
        paymentService.process(order);
        // Preparar modelo
        request.setAttribute("confirmation", "Order ID: 123");
        // Despachar vista
        view.forward("confirmation.jsp");
    }
}
</code></pre>
</div>
<span class="center-horizontal caption">Ejemplo de Service to Worker</span>
