<style>
    .title, .subtitle, strong {
        color: black !important;
    }
</style>
<h1 class="title">Patrón Decorator</h1>

<p>El patrón <strong>Decorator</strong> es un patrón estructural que permite añadir funcionalidades a objetos colocando estos objetos dentro de objetos encapsuladores especiales que contienen estas funcionalidades.</p>

<h2 class="subtitle">Propósito</h2>
<p>Añadir responsabilidades a un objeto de forma dinámica. Provee una alternativa flexible a la herencia para extender la funcionalidad.</p>

<h2 class="subtitle">Caso de Uso Real: Sistema de Cafetería (Personalización de Bebidas)</h2>
<p><strong>Contexto:</strong> Una cafetería vende cafés con múltiples combinaciones de ingredienes: Leche, Azúcar, Chocolate, Vainilla, Canela, Nata, etc.</p>

<p><strong>El Problema:</strong> Usar herencia (<code class="language-java">CafeConLeche</code>, <code class="language-java">CafeConLecheYChocolate</code>, <code class="language-java">CafeSoloConAzucar</code>...) crea una explosión combinatoria de clases imposible de mantener. Añadir un nuevo ingrediente implicaría crear docenas de nuevas clases combinadas.</p>

<p><strong>La Solución (Decorator):</strong> Empiezas con un objeto base (<code class="language-java">SimpleCoffee</code>). Los ingredientes extra son "Envoltorios" (Decoradores).
<br>Para crear un Café con Leche y Azúcar, envuelves el café: <code class="language-java">new Sugar(new Milk(new SimpleCoffee()))</code>. Cada envoltorio añade su precio y su descripción a lo que devuelve el objeto envuelto. Es infinitamente flexible.</p>

<h2 class="subtitle">Análisis de la Implementación</h2>

<ul>
    <li>
        <strong>Herencia y Composición simultánea:</strong> 
        <p>El decorador <em>es un</em> Café (implements <code class="language-java">Coffee</code>) y <em>tiene un</em> Café (composition). Esto es clave: "Es un Café" para que pueda ser pasado a otros decoradores, y "Tiene un Café" para poder delegar y añadir comportamiento. Esto cumple el principio de <strong>Abierto/Cerrado</strong>.</p>
    </li>
    <li>
        <strong>Transparencia:</strong> 
        <p>El cliente no sabe si está tratando con un café simple o uno con 10 ingredientes, ya que todos implementan la interfaz común.</p>
    </li>
</ul>

<h2 class="subtitle">Implementación</h2>

<div class="center-horizontal">
<pre><code class="language-java">
// Componente
interface Coffee {
    String getDescription();
    double getCost();
}

// Componente Concreto
class SimpleCoffee implements Coffee {
    @Override
    public String getDescription() {
        return "Café Simple";
    }
    @Override
    public double getCost() {
        return 1.0;
    }
}

// Decorador Base
abstract class CoffeeDecorator implements Coffee {
    protected Coffee decoratedCoffee;

    public CoffeeDecorator(Coffee coffee) {
        this.decoratedCoffee = coffee;
    }

    @Override
    public String getDescription() {
        return decoratedCoffee.getDescription();
    }
    @Override
    public double getCost() {
        return decoratedCoffee.getCost();
    }
}

// Decoradores Concretos
class MilkDecorator extends CoffeeDecorator {
    public MilkDecorator(Coffee coffee) {
        super(coffee);
    }
    @Override
    public String getDescription() {
        return super.getDescription() + ", con Leche";
    }
    @Override
    public double getCost() {
        return super.getCost() + 0.5;
    }
}

class SugarDecorator extends CoffeeDecorator {
    public SugarDecorator(Coffee coffee) {
        super(coffee);
    }
    @Override
    public String getDescription() {
        return super.getDescription() + ", con Azúcar";
    }
    @Override
    public double getCost() {
        return super.getCost() + 0.2;
    }
}
</code></pre>
</div>
<span class="center-horizontal caption">Estructura Decorator</span>

<br>

<h2 class="subtitle">Ejemplo de Uso</h2>

<div class="center-horizontal">
<pre><code class="language-java">
public class Main {
    public static void main(String[] args) {
        // Café simple
        Coffee myCoffee = new SimpleCoffee();
        System.out.println(myCoffee.getDescription() + " $" + myCoffee.getCost());

        // Café con leche
        myCoffee = new MilkDecorator(myCoffee);
        System.out.println(myCoffee.getDescription() + " $" + myCoffee.getCost());

        // Café con leche y azúcar
        myCoffee = new SugarDecorator(myCoffee);
        System.out.println(myCoffee.getDescription() + " $" + myCoffee.getCost());
    }
}
</code></pre>
</div>

<div class="center-horizontal">
<pre><code class="language-java">
Output:
Café Simple $1.0
Café Simple, con Leche $1.5
Café Simple, con Leche, con Azúcar $1.7
</code></pre>
</div>
