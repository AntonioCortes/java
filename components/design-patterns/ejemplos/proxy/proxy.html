<h1 class="title">Patrón Proxy</h1>

<p>El patrón <strong>Proxy</strong> es un patrón estructural que proporciona un sustituto o marcador de posición para otro objeto. Un proxy controla el acceso al objeto original, permitiendo hacer algo antes o después de que la solicitud llegue al objeto original.</p>

<h2 class="subtitle">Propósito</h2>
<p>Controlar el acceso a un objeto. Puede ser para carga perezosa (Virtual Proxy), control de acceso (Protection Proxy), ejecución remota (Remote Proxy) o logging.</p>

<h2 class="subtitle">Caso de Uso Real</h2>
<p>Carga de imágenes pesadas. No queremos cargar una imagen de 100MB en memoria hasta que sea estrictamente necesario mostrarla. El Proxy se crea rápido y carga la imagen real solo cuando se llama a `display()`.</p>

<h2 class="subtitle">Implementación</h2>

<div class="center-horizontal">
<pre><code class="language-java">
interface Image {
    void display();
}

class RealImage implements Image {
    private String fileName;

    public RealImage(String fileName) {
        this.fileName = fileName;
        loadFromDisk(fileName);
    }

    private void loadFromDisk(String fileName) {
        System.out.println("Cargando imagen pesada: " + fileName);
    }

    @Override
    public void display() {
        System.out.println("Mostrando imagen: " + fileName);
    }
}

class ProxyImage implements Image {
    private RealImage realImage;
    private String fileName;

    public ProxyImage(String fileName) {
        this.fileName = fileName;
    }

    @Override
    public void display() {
        if (realImage == null) {
            realImage = new RealImage(fileName);
        }
        realImage.display();
    }
}
</code></pre>
</div>
<span class="center-horizontal caption">Estructura Proxy (Virtual Proxy)</span>

<br>

<h2 class="subtitle">Ejemplo de Uso</h2>

<div class="center-horizontal">
<pre><code class="language-java">
public class Main {
    public static void main(String[] args) {
        Image image = new ProxyImage("foto_alta_resolucion.jpg");

        // La imagen no se carga todavía
        System.out.println("Proxy creado. Imagen no cargada.");

        // La imagen se carga del disco ahora
        image.display();

        // La imagen ya está cargada, no se recarga
        image.display();
    }
}
</code></pre>
</div>

<div class="center-horizontal">
<pre><code class="language-plaintext">
Output:
Proxy creado. Imagen no cargada.
Cargando imagen pesada: foto_alta_resolucion.jpg
Mostrando imagen: foto_alta_resolucion.jpg
Mostrando imagen: foto_alta_resolucion.jpg
</code></pre>
</div>
